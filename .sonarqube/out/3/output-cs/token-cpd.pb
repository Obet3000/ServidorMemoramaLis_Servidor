œ;
mC:\Users\obeth\Downloads\ServidorMemoramaLis_Servidor\ServidorMemoramaLis_Servidor\AutentificacionServicio.cs
	namespace 	(
ServidorMemoramaLis_Servidor
 &
{ 
[ 
ServiceBehavior 
( 
InstanceContextMode (
=) *
InstanceContextMode+ >
.> ?
Single? E
)E F
]F G
public 

class #
AutentificacionServicio (
:) *$
IAutentificacionServicio+ C
{ 

Dictionary 
< 
string 
, 
OperationContext +
>+ ,
jugadoresActivos- =
=> ?
new@ C

DictionaryD N
<N O
stringO U
,U V
OperationContextW g
>g h
(h i
)i j
;j k
public 
void "
AutentificacionUsuario *
(* +
string+ 1
usuario2 9
,9 :
string; A
contraseniaB M
)M N
{ 	
JugadoresDTO 

jugadorDTO #
=$ %)
RespuestaAutenficacionJugador& C
(C D
usuarioD K
,K L
contraseniaM X
)X Y
;Y Z
if 
( 

jugadorDTO 
. 
NombreJugador (
!=) +
null, 0
&&1 3
!4 5
jugadoresActivos5 E
.E F
ContainsKeyF Q
(Q R

jugadorDTOR \
.\ ]
NombreJugador] j
)j k
)k l
{ 
jugadoresActivos  
.  !
Add! $
($ %

jugadorDTO% /
./ 0
NombreJugador0 =
,= >
OperationContext? O
.O P
CurrentP W
)W X
;X Y
} 
OperationContext 
. 
Current $
.$ %
GetCallbackChannel% 7
<7 8,
 IAutentificacionServicioCallBack8 X
>X Y
(Y Z
)Z [
.[ \$
RespuestaAutentificacion\ t
(t u

jugadorDTOu 
)	 Ä
;
Ä Å
}   	
public"" 
void"" 
RegistroJugador"" #
(""# $
JugadoresDTO""$ 0
jugador""1 8
)""8 9
{## 	
bool$$ 
status$$ 
=$$ 
RegistrarJugador$$ *
($$* +
jugador$$+ 2
)$$2 3
;$$3 4
OperationContext%% 
.%% 
Current%% $
.%%$ %
GetCallbackChannel%%% 7
<%%7 8,
 IAutentificacionServicioCallBack%%8 X
>%%X Y
(%%Y Z
)%%Z [
.%%[ \
Respuestaregistro%%\ m
(%%m n
status%%n t
)%%t u
;%%u v
}(( 	
public** 
void** 
UsuarioExistente** $
(**$ %
string**% +
usuario**, 3
,**3 4
string**5 ;
correo**< B
)**B C
{++ 	
throw,, 
new,, #
NotImplementedException,, -
(,,- .
),,. /
;,,/ 0
}-- 	
public// 
void// 
ValidacionDeEmail// %
(//% &
string//& ,
correo//- 3
)//3 4
{00 	
throw11 
new11 #
NotImplementedException11 -
(11- .
)11. /
;11/ 0
}22 	
public44 
JugadoresDTO44 )
RespuestaAutenficacionJugador44 9
(449 :
string44: @
nombreJugador44A N
,44N O
string44P V
contrasenia44W b
)44b c
{55 	
JugadoresDTO66 

jugadorDTO66 #
=66$ %
new66& )
JugadoresDTO66* 6
(666 7
)667 8
{77 
EstadoConexion88 
=88  
false88! &
}99 
;99 
using;; 
(;; 
var;; 
context;; 
=;;  
new;;! $
MemoramaLISEntities;;% 8
(;;8 9
);;9 :
);;: ;
{<< 
	Jugadores== 
jugador== !
===" #
context==$ +
.==+ ,
	Jugadores==, 5
.==5 6
FirstOrDefault==6 D
(==D E
j==E F
=>==G I
j==J K
.==K L
email==L Q
====R T
nombreJugador==U b
&&==c e
j==f g
.==g h
contrasenia==h s
====t v
contrasenia	==w Ç
)
==Ç É
;
==É Ñ
if?? 
(?? 
jugador?? 
!=?? 
null?? #
)??# $
{@@ 

jugadorDTOAA 
.AA 
EstadoConexionAA -
=AA. /
trueAA0 4
;AA4 5

jugadorDTOBB 
.BB 
EmailBB $
=BB% &
jugadorBB' .
.BB. /
emailBB/ 4
;BB4 5

jugadorDTOCC 
.CC 
NombreJugadorCC ,
=CC- .
jugadorCC/ 6
.CC6 7
nombreJugadorCC7 D
;CCD E

jugadorDTODD 
.DD 
FotosDD $
=DD% &
jugadorDD' .
.DD. /
FotosDD/ 4
;DD4 5
}EE 
returnFF 

jugadorDTOFF !
;FF! "
}GG 
}HH 	
publicJJ 
boolJJ 
RegistrarJugadorJJ $
(JJ$ %
JugadoresDTOJJ% 1

jugadorDTOJJ2 <
)JJ< =
{KK 	
boolLL 
statusLL 
=LL 
falseLL 
;LL  
usingMM 
(MM 
varMM 
contextMM 
=MM  
newMM! $
MemoramaLISEntitiesMM% 8
(MM8 9
)MM9 :
)MM: ;
{NN 
	JugadoresOO 
nuevoJugadorOO &
=OO' (
newOO) ,
	JugadoresOO- 6
{PP 
	idJugadorQQ 
=QQ 
GuidQQ  $
.QQ$ %
NewGuidQQ% ,
(QQ, -
)QQ- .
,QQ. /
nombreJugadorRR !
=RR" #

jugadorDTORR$ .
.RR. /
NombreJugadorRR/ <
,RR< =
contraseniaSS 
=SS  !

jugadorDTOSS" ,
.SS, -
ContraseniaSS- 8
,SS8 9
emailTT 
=TT 

jugadorDTOTT &
.TT& '
EmailTT' ,
,TT, -
FotosUU 
=UU 

jugadorDTOUU &
.UU& '
FotosUU' ,
,UU, -
}VV 
;VV 
contextXX 
.XX 
	JugadoresXX !
.XX! "
AddXX" %
(XX% &
nuevoJugadorXX& 2
)XX2 3
;XX3 4
tryYY 
{ZZ 
var[[ 
	resultado[[ !
=[[" #
context[[$ +
.[[+ ,
SaveChanges[[, 7
([[7 8
)[[8 9
;[[9 :
if\\ 
(\\ 
	resultado\\ !
>\\" #
$num\\$ %
)\\% &
{]] 
status^^ 
=^^  
true^^! %
;^^% &
}__ 
}`` 
catchaa 
(aa 
EntityExceptionaa &
exaa' )
)aa) *
{bb 
Transactioncc 
.cc  
Currentcc  '
.cc' (
Rollbackcc( 0
(cc0 1
)cc1 2
;cc2 3
}dd 
returnee 
statusee 
;ee 
}ff 
}gg 	
}hh 
}ll ò
]C:\Users\obeth\Downloads\ServidorMemoramaLis_Servidor\ServidorMemoramaLis_Servidor\program.cs
	namespace 	(
ServidorMemoramaLis_Servidor
 &
{ 
internal 
class 
Program 
{		 
static

 
void

 
Main

 
(

 
string

 
[

  
]

  !
args

" &
)

& '
{ 	
Console 
. 
	WriteLine 
( 
$str 3
)3 4
;4 5
ServiceHost 
host1 
= 
new  #
ServiceHost$ /
(/ 0
typeof0 6
(6 7#
AutentificacionServicio7 N
)N O
)O P
;P Q
ServiceHost 
host2 
= 
new  #
ServiceHost$ /
(/ 0
typeof0 6
(6 7
ServicioChat7 C
)C D
)D E
;E F
ServiceHost 
host3 
= 
new  #
ServiceHost$ /
(/ 0
typeof0 6
(6 7
ServicioPartida7 F
)F G
)G H
;H I
host1 
. 
Open 
( 
) 
; 
host2 
. 
Open 
( 
) 
; 
host3 
. 
Open 
( 
) 
; 
Console 
. 
	WriteLine 
( 
$str 3
)3 4
;4 5
Console 
. 
ReadLine 
( 
) 
; 
host2 
. 
Close 
( 
) 
; 
host1 
. 
Close 
( 
) 
; 
host3 
. 
Close 
( 
) 
; 
} 	
} 
} ò
mC:\Users\obeth\Downloads\ServidorMemoramaLis_Servidor\ServidorMemoramaLis_Servidor\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str 7
)7 8
]8 9
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str 9
)9 :
]: ;
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[## 
assembly## 	
:##	 

AssemblyVersion## 
(## 
$str## $
)##$ %
]##% &
[$$ 
assembly$$ 	
:$$	 

AssemblyFileVersion$$ 
($$ 
$str$$ (
)$$( )
]$$) *†
bC:\Users\obeth\Downloads\ServidorMemoramaLis_Servidor\ServidorMemoramaLis_Servidor\ServicioChat.cs
	namespace

 	(
ServidorMemoramaLis_Servidor


 &
{ 
[ 
ServiceBehavior 
( 
InstanceContextMode (
=) *
InstanceContextMode+ >
.> ?
Single? E
)E F
]F G
public 

class 
ServicioChat 
: 
IServicioChat  -
{ 
List 
< 
PartidasDTO 
> 
chatsActivos &
=' (
new) ,
List- 1
<1 2
PartidasDTO2 =
>= >
(> ?
)? @
;@ A
public 
void 

BorrarChat 
( 
string %
codigoDeChat& 2
)2 3
{ 	
var 
chat 
= 
chatsActivos #
.# $
FirstOrDefault$ 2
(2 3
chatPartida3 >
=>? A
chatPartidaB M
.M N
codigoPartidaN [
==\ ^
codigoDeChat_ k
)k l
;l m
if 
( 
chat 
!= 
null 
) 
{ 
chatsActivos 
. 
Remove #
(# $
chat$ (
)( )
;) *
} 
} 	
public 
void 
	CrearChat 
( 
string $
codigoDeChat% 1
)1 2
{ 	
List 
< !
Partidas_JugadoresDTO &
>& '!
partidas_JugadoresDTO( =
=> ?
new@ C
ListD H
<H I!
Partidas_JugadoresDTOI ^
>^ _
(_ `
)` a
;a b
PartidasDTO 

partidaDTO "
=# $
new% (
PartidasDTO) 4
(4 5
)5 6
{ 
codigoPartida 
= 
codigoDeChat  ,
,, -
}   
;   
chatsActivos!! 
.!! 
Add!! 
(!! 

partidaDTO!! '
)!!' (
;!!( )
}"" 	
public$$ 
void$$ 
EnviarMensaje$$ !
($$! "
string$$" (
mensaje$$) 0
,$$0 1
string$$2 8
nombreUsuario$$9 F
,$$F G
string$$H N
codigoDeChat$$O [
)$$[ \
{%% 	
}99 	
public;; 
void;; 
SalirDelChat;;  
(;;  !
string;;! '
nombreDeUsuario;;( 7
,;;7 8
string;;9 ?
codigoDeChat;;@ L
);;L M
{<< 	
}HH 	
publicJJ 
voidJJ 
UnirseAChatJJ 
(JJ  
stringJJ  &
nombreUsuarioJJ' 4
,JJ4 5
stringJJ6 <
codigoDeChatJJ= I
)JJI J
{KK 	
}]] 	
}^^ 
}__ ñø
eC:\Users\obeth\Downloads\ServidorMemoramaLis_Servidor\ServidorMemoramaLis_Servidor\ServicioPartida.cs
	namespace

 	(
ServidorMemoramaLis_Servidor


 &
{ 
[ 
ServiceBehavior 
( 
InstanceContextMode (
=) *
InstanceContextMode+ >
.> ?
Single? E
)E F
]F G
public 

partial 
class 
ServicioPartida (
:) *
IServicioPartida+ ;
{ 

Dictionary 
< 
int 
, 
string 
> 
tableroGenerado  /
=0 1
new2 5

Dictionary6 @
<@ A
intA D
,D E
stringF L
>L M
{ 	
{ 
$num 
, 
$str "
}# $
,$ %
{ 
$num 
, 
$str %
}& '
,' (
{ 
$num 
, 
$str 
}  !
,! "
{ 
$num 
, 
$str 
} 
,  
{ 
$num 
, 
$str 
} 
, 
{ 
$num 
, 
$str 
}  !
,! "
{ 
$num 
, 
$str "
}# $
,$ %
{ 
$num 
, 
$str &
}' (
,( )
{ 
$num 
, 
$str  
}! "
," #
{ 
$num 
, 
$str %
}& '
,' (
{ 
$num 
, 
$str  
}! "
," #
{ 
$num 
, 
$str &
}' (
,( )
{ 
$num 
, 
$str +
}, -
,- .
{   
$num   
,   
$str   (
}  ) *
,  * +
{!! 
$num!! 
,!! 
$str!! &
}!!' (
,!!( )
{"" 
$num"" 
,"" 
$str"" 1
}""2 3
,""3 4
{## 
$num## 
,## 
$str## 
}##  
,##  !
{$$ 
$num$$ 
,$$ 
$str$$ ,
}$$- .
,$$. /
{%% 
$num%% 
,%% 
$str%% .
}%%/ 0
,%%0 1
{&& 
$num&& 
,&& 
$str&& .
}&&/ 0
,&&0 1
{'' 
$num'' 
,'' 
$str'' 
}''  !
,''! "
{(( 
$num(( 
,(( 
$str(( +
}((, -
,((- .
{)) 
$num)) 
,)) 
$str)) #
}))$ %
,))% &
{** 
$num** 
,** 
$str** #
}**$ %
,**% &
{++ 
$num++ 
,++ 
$str++  
}++! "
,++" #
{,, 
$num,, 
,,, 
$str,, $
},,% &
,,,& '
{-- 
$num-- 
,-- 
$str--  
}--! "
,--" #
{.. 
$num.. 
,.. 
$str.. !
}.." #
,..# $
{// 
$num// 
,// 
$str// "
}//# $
,//$ %
{00 
$num00 
,00 
$str00 )
}00* +
,00+ ,
{11 
$num11 
,11 
$str11 %
}11& '
,11' (
{22 
$num22 
,22 
$str22 !
}22" #
,22# $
{33 
$num33 
,33 
$str33 !
}33" #
,33# $
{44 
$num44 
,44 
$str44 
}44  !
,44! "
{55 
$num55 
,55 
$str55 !
}55" #
,55# $
{66 
$num66 
,66 
$str66 
}66  
,66  !
{77 
$num77 
,77 
$str77  
}77! "
,77" #
{88 
$num88 
,88 
$str88 !
}88" #
,88# $
{99 
$num99 
,99 
$str99  
}99! "
,99" #
{:: 
$num:: 
,:: 
$str:: $
}::% &
,::& '
{;; 
$num;; 
,;; 
$str;; !
};;" #
,;;# $
{<< 
$num<< 
,<< 
$str<< &
}<<' (
,<<( )
{== 
$num== 
,== 
$str==  
}==! "
,==" #
{>> 
$num>> 
,>> 
$str>> 
}>>  !
,>>! "
{?? 
$num?? 
,?? 
$str?? !
}??" #
,??# $
{@@ 
$num@@ 
,@@ 
$str@@ 
}@@ 
,@@ 
{AA 
$numAA 
,AA 
$strAA 
}AA  
,AA  !
{BB 
$numBB 
,BB 
$strBB (
}BB) *
,BB* +
{CC 
$numCC 
,CC 
$strCC (
}CC) *
,CC* +
{DD 
$numDD 
,DD 
$strDD %
}DD& '
,DD' (
{EE 
$numEE 
,EE 
$strEE #
}EE$ %
,EE% &
{FF 
$numFF 
,FF 
$strFF &
}FF' (
,FF( )
{GG 
$numGG 
,GG 
$strGG  
}GG! "
,GG" #
{HH 
$numHH 
,HH 
$strHH 
}HH  
,HH  !
{II 
$numII 
,II 
$strII 
}II 
,II  
{JJ 
$numJJ 
,JJ 
$strJJ  
}JJ! "
,JJ" #
{KK 
$numKK 
,KK 
$strKK #
}KK$ %
,KK% &
{LL 
$numLL 
,LL 
$strLL '
}LL( )
,LL) *
{MM 
$numMM 
,MM 
$strMM !
}MM" #
,MM# $
{NN 
$numNN 
,NN 
$strNN %
}NN& '
,NN' (
{OO 
$numOO 
,OO 
$strOO  
}OO! "
,OO" #
{PP 
$numPP 
,PP 
$strPP &
}PP' (
,PP( )
{QQ 
$numQQ 
,QQ 
$strQQ +
}QQ, -
,QQ- .
{RR 
$numRR 
,RR 
$strRR (
}RR) *
,RR* +
{SS 
$numSS 
,SS 
$strSS &
}SS' (
,SS( )
{TT 
$numTT 
,TT 
$strTT 1
}TT2 3
,TT3 4
{UU 
$numUU 
,UU 
$strUU 
}UU  
,UU  !
{VV 
$numVV 
,VV 
$strVV ,
}VV- .
,VV. /
{WW 
$numWW 
,WW 
$strWW .
}WW/ 0
,WW0 1
{XX 
$numXX 
,XX 
$strXX .
}XX/ 0
,XX0 1
{YY 
$numYY 
,YY 
$strYY 
}YY  !
,YY! "
{ZZ 
$numZZ 
,ZZ 
$strZZ +
}ZZ, -
,ZZ- .
{[[ 
$num[[ 
,[[ 
$str[[ #
}[[$ %
,[[% &
{\\ 
$num\\ 
,\\ 
$str\\ #
}\\$ %
,\\% &
{]] 
$num]] 
,]] 
$str]]  
}]]! "
,]]" #
{^^ 
$num^^ 
,^^ 
$str^^ $
}^^% &
,^^& '
{__ 
$num__ 
,__ 
$str__  
}__! "
,__" #
{`` 
$num`` 
,`` 
$str`` !
}``" #
,``# $
{aa 
$numaa 
,aa 
$straa "
}aa# $
,aa$ %
{bb 
$numbb 
,bb 
$strbb )
}bb* +
,bb+ ,
{cc 
$numcc 
,cc 
$strcc %
}cc& '
,cc' (
{dd 
$numdd 
,dd 
$strdd !
}dd" #
,dd# $
{ee 
$numee 
,ee 
$stree !
}ee" #
,ee# $
{ff 
$numff 
,ff 
$strff 
}ff  !
,ff! "
{gg 
$numgg 
,gg 
$strgg !
}gg" #
,gg# $
{hh 
$numhh 
,hh 
$strhh 
}hh  
,hh  !
{ii 
$numii 
,ii 
$strii  
}ii! "
,ii" #
{jj 
$numjj 
,jj 
$strjj !
}jj" #
,jj# $
{kk 
$numkk 
,kk 
$strkk  
}kk! "
,kk" #
{ll 
$numll 
,ll 
$strll $
}ll% &
,ll& '
{mm 
$nummm 
,mm 
$strmm !
}mm" #
,mm# $
{nn 
$numnn 
,nn 
$strnn &
}nn' (
,nn( )
{oo 
$numoo 
,oo 
$stroo  
}oo! "
,oo" #
{pp 
$numpp 
,pp 
$strpp 
}pp  !
,pp! "
{qq 
$numqq 
,qq 
$strqq !
}qq" #
,qq# $
{rr 
$numrr 
,rr 
$strrr 
}rr 
,rr 
{ss 
$numss 
,ss 
$strss 
}ss  
,ss  !
{tt 
$numtt 
,tt 
$strtt (
}tt) *
,tt* +
{uu 
$numuu 
,uu 
$struu (
}uu) *
,uu* +
{vv 
$numvv 
,vv 
$strvv &
}vv' (
,vv( )
}ww 	
;ww	 

Listyy 
<yy 
PartidasDTOyy 
>yy 
partidasActivasyy )
=yy* +
newyy, /
Listyy0 4
<yy4 5
PartidasDTOyy5 @
>yy@ A
(yyA B
)yyB C
;yyC D
public{{ 
void{{ 
BorrarPartida{{ !
({{! "
string{{" (
codigoDePartida{{) 8
){{8 9
{|| 	
var}} 
partidaEliminar}} 
=}}  
partidasActivas}}! 0
.}}0 1
FirstOrDefault}}1 ?
(}}? @
partida}}@ G
=>}}H J
partida}}K R
.}}R S
codigoPartida}}S `
==}}a c
codigoDePartida}}d s
)}}s t
;}}t u
if~~ 
(~~ 
partidaEliminar~~ 
!=~~  "
null~~# '
)~~' (
{ 
partidasActivas
ÄÄ 
.
ÄÄ  
Remove
ÄÄ  &
(
ÄÄ& '
partidaEliminar
ÄÄ' 6
)
ÄÄ6 7
;
ÄÄ7 8
}
ÅÅ 
}
ÇÇ 	
public
ÑÑ 
void
ÑÑ 
ContarJugadores
ÑÑ #
(
ÑÑ# $
string
ÑÑ$ *
codigoDePartida
ÑÑ+ :
)
ÑÑ: ;
{
ÖÖ 	
throw
ÜÜ 
new
ÜÜ %
NotImplementedException
ÜÜ -
(
ÜÜ- .
)
ÜÜ. /
;
ÜÜ/ 0
}
áá 	
public
ââ 
void
ââ 
CrearPartida
ââ  
(
ââ  !
string
ââ! '
codigoDePartida
ââ( 7
)
ââ7 8
{
ää 	
PartidasDTO
åå 

partidaDTO
åå "
=
åå# $
new
åå% (
PartidasDTO
åå) 4
(
åå4 5
)
åå5 6
;
åå6 7
var
çç 
random
çç 
=
çç 
new
çç 
Random
çç #
(
çç# $
)
çç$ %
;
çç% &
var
éé 
tableroRevuelto
éé 
=
éé  !
tableroGenerado
éé" 1
.
éé1 2
OrderBy
éé2 9
(
éé9 :
x
éé: ;
=>
éé< >
random
éé? E
.
ééE F
Next
ééF J
(
ééJ K
)
ééK L
)
ééL M
.
ééM N
ToDictionary
ééN Z
(
ééZ [
item
éé[ _
=>
éé` b
item
ééc g
.
éég h
Key
ééh k
,
éék l
item
éém q
=>
éér t
item
ééu y
.
ééy z
Value
ééz 
)éé Ä
;ééÄ Å

partidaDTO
èè 
.
èè 
numeroJugadores
èè &
=
èè' (
$num
èè) *
;
èè* +

partidaDTO
êê 
.
êê 
tablero
êê 
=
êê  
tableroRevuelto
êê! 0
;
êê0 1

partidaDTO
ëë 
.
ëë 
	Jugadores
ëë  
=
ëë! "
new
ëë# &
List
ëë' +
<
ëë+ ,
JugadoresDTO
ëë, 8
>
ëë8 9
(
ëë9 :
)
ëë: ;
;
ëë; <

partidaDTO
íí 
.
íí 
	idPartida
íí  
=
íí! "
codigoDePartida
íí# 2
;
íí2 3

partidaDTO
ìì 
.
ìì 
codigoPartida
ìì $
=
ìì% &
codigoDePartida
ìì' 6
;
ìì6 7
partidasActivas
îî 
.
îî 
Add
îî 
(
îî  

partidaDTO
îî  *
)
îî* +
;
îî+ ,
}
ññ 	
public
òò 
void
òò 
EnviarMovimiento
òò $
(
òò$ %
string
òò% +

movimiento
òò, 6
,
òò6 7
string
òò8 >
nombreUsuario
òò? L
,
òòL M
string
òòN T
codigoDePartida
òòU d
)
òòd e
{
ôô 	
throw
öö 
new
öö %
NotImplementedException
öö -
(
öö- .
)
öö. /
;
öö/ 0
}
õõ 	
public
ûû 
void
ûû 
IniciarJuego
ûû  
(
ûû  !
string
ûû! '
codigoDePartida
ûû( 7
)
ûû7 8
{
üü 	
PartidasDTO
†† 
partidaAIniciar
†† '
=
††( )
new
††* -
PartidasDTO
††. 9
(
††9 :
)
††: ;
;
††; <
partidaAIniciar
°° 
.
°° 
codigoPartida
°° )
=
°°* +
partidasActivas
°°, ;
.
°°; <
FirstOrDefault
°°< J
(
°°J K
partida
°°K R
=>
°°S U
partida
°°V ]
.
°°] ^
codigoPartida
°°^ k
==
°°l n
codigoDePartida
°°o ~
)
°°~ 
.°° Ä
codigoPartida°°Ä ç
;°°ç é
partidaAIniciar
¢¢ 
.
¢¢ 
	idPartida
¢¢ %
=
¢¢& '
partidasActivas
¢¢( 7
.
¢¢7 8
FirstOrDefault
¢¢8 F
(
¢¢F G
partida
¢¢G N
=>
¢¢O Q
partida
¢¢R Y
.
¢¢Y Z
codigoPartida
¢¢Z g
==
¢¢h j
codigoDePartida
¢¢k z
)
¢¢z {
.
¢¢{ |
	idPartida¢¢| Ö
;¢¢Ö Ü
partidaAIniciar
££ 
.
££ 
	Jugadores
££ %
=
££& '
partidasActivas
££( 7
.
££7 8
FirstOrDefault
££8 F
(
££F G
partida
££G N
=>
££O Q
partida
££R Y
.
££Y Z
codigoPartida
££Z g
==
££h j
codigoDePartida
££k z
)
££z {
.
££{ |
	Jugadores££| Ö
;££Ö Ü
partidaAIniciar
§§ 
.
§§ 
numeroJugadores
§§ +
=
§§, -
partidasActivas
§§. =
.
§§= >
FirstOrDefault
§§> L
(
§§L M
partida
§§M T
=>
§§U W
partida
§§X _
.
§§_ `
codigoPartida
§§` m
==
§§n p
codigoDePartida§§q Ä
)§§Ä Å
.§§Å Ç
numeroJugadores§§Ç ë
;§§ë í
partidaAIniciar
•• 
.
•• 
tablero
•• #
=
••$ %
partidasActivas
••& 5
.
••5 6
FirstOrDefault
••6 D
(
••D E
partida
••E L
=>
••M O
partida
••P W
.
••W X
codigoPartida
••X e
==
••f h
codigoDePartida
••i x
)
••x y
.
••y z
tablero••z Å
;••Å Ç
if
¶¶ 
(
¶¶ 
partidaAIniciar
¶¶ 
!=
¶¶  "
null
¶¶# '
)
¶¶' (
{
¶¶) *
for
ßß 
(
ßß 
int
ßß 
i
ßß 
=
ßß 
$num
ßß 
;
ßß 
i
ßß  !
<
ßß" #
partidaAIniciar
ßß$ 3
.
ßß3 4
	Jugadores
ßß4 =
.
ßß= >
Count
ßß> C
(
ßßC D
)
ßßD E
;
ßßE F
i
ßßG H
++
ßßH J
)
ßßJ K
{
®® 
try
©© 
{
™™ 
partidaAIniciar
´´ '
.
´´' (
	Jugadores
´´( 1
.
´´1 2
	ElementAt
´´2 ;
(
´´; <
i
´´< =
)
´´= >
.
´´> ?
Conexion
´´? G
.
´´G H 
GetCallbackChannel
´´H Z
<
´´Z [&
IServicioPartidaCallBack
´´[ s
>
´´s t
(
´´t u
)
´´u v
.
´´v w
RecibirTablero´´w Ö
(´´Ö Ü
partidaAIniciar´´Ü ï
.´´ï ñ
tablero´´ñ ù
)´´ù û
;´´û ü
}
¨¨ 
catch
≠≠ 
(
≠≠ 1
#CommunicationObjectAbortedException
≠≠ >
)
≠≠> ?
{
ÆÆ 
partidaAIniciar
ØØ '
.
ØØ' (
	Jugadores
ØØ( 1
.
ØØ1 2
	ElementAt
ØØ2 ;
(
ØØ; <
i
ØØ< =
)
ØØ= >
.
ØØ> ?
Conexion
ØØ? G
.
ØØG H 
GetCallbackChannel
ØØH Z
<
ØØZ [&
IServicioPartidaCallBack
ØØ[ s
>
ØØs t
(
ØØt u
)
ØØu v
.
ØØv w
ExpulsarJugadorØØw Ü
(ØØÜ á
partidaAIniciarØØá ñ
.ØØñ ó
	JugadoresØØó †
.ØØ† °
	ElementAtØØ° ™
(ØØ™ ´
iØØ´ ¨
)ØØ¨ ≠
.ØØ≠ Æ
NombreJugadorØØÆ ª
)ØØª º
;ØØº Ω
partidaAIniciar
∞∞ '
.
∞∞' (
	Jugadores
∞∞( 1
.
∞∞1 2
Remove
∞∞2 8
(
∞∞8 9
partidaAIniciar
∞∞9 H
.
∞∞H I
	Jugadores
∞∞I R
.
∞∞R S
	ElementAt
∞∞S \
(
∞∞\ ]
i
∞∞] ^
)
∞∞^ _
)
∞∞_ `
;
∞∞` a
}
±± 
}
≤≤ 
}
≥≥ 
}
¥¥ 	
public
∂∂ 
void
∂∂ 
ReportarJugador
∂∂ #
(
∂∂# $
string
∂∂$ *
nombreDeUSuario
∂∂+ :
,
∂∂: ;
string
∂∂< B
codigoDePartida
∂∂C R
)
∂∂R S
{
∑∑ 	
throw
∏∏ 
new
∏∏ %
NotImplementedException
∏∏ -
(
∏∏- .
)
∏∏. /
;
∏∏/ 0
}
ππ 	
public
ªª 
void
ªª 
SalirDePartida
ªª "
(
ªª" #
string
ªª# )
nombreDeUsuario
ªª* 9
,
ªª9 :
string
ªª; A
codigoDePartida
ªªB Q
)
ªªQ R
{
ºº 	
throw
ΩΩ 
new
ΩΩ %
NotImplementedException
ΩΩ -
(
ΩΩ- .
)
ΩΩ. /
;
ΩΩ/ 0
}
ææ 	
public
¿¿ 
void
¿¿ 
TerminarPartida
¿¿ #
(
¿¿# $
string
¿¿$ *
codigoDePartida
¿¿+ :
)
¿¿: ;
{
¡¡ 	
throw
¬¬ 
new
¬¬ %
NotImplementedException
¬¬ -
(
¬¬- .
)
¬¬. /
;
¬¬/ 0
}
√√ 	
public
≈≈ 
void
≈≈ 
UnirseAPartida
≈≈ "
(
≈≈" #
JugadoresDTO
≈≈# /
jugador
≈≈0 7
,
≈≈7 8
string
≈≈9 ?
codigoDePartida
≈≈@ O
)
≈≈O P
{
∆∆ 	
var
«« 
partidaEncontrada
«« %
=
««& '
partidasActivas
««( 7
.
««7 8
FirstOrDefault
««8 F
(
««F G
partida
««G N
=>
««O Q
partida
««R Y
.
««Y Z
codigoPartida
««Z g
==
««h j
codigoDePartida
««k z
)
««z {
;
««{ |
if
»» 
(
»» 
partidaEncontrada
»» %
!=
»»& (
null
»») -
)
»»- .
{
…… 
jugador
ÀÀ 
.
ÀÀ 
Conexion
ÀÀ $
=
ÀÀ% &
OperationContext
ÀÀ' 7
.
ÀÀ7 8
Current
ÀÀ8 ?
;
ÀÀ? @
partidaEncontrada
ÕÕ %
.
ÕÕ% &
	Jugadores
ÕÕ& /
.
ÕÕ/ 0
Add
ÕÕ0 3
(
ÕÕ3 4
jugador
ÕÕ4 ;
)
ÕÕ; <
;
ÕÕ< =
Task
œœ 
tarea
œœ 
=
œœ 
new
œœ  
Task
œœ! %
(
œœ% &
(
œœ& '
)
œœ' (
=>
œœ) +
{
œœ, -
for
–– 
(
–– 
int
–– 
i
–– 
=
––  
$num
––! "
;
––" #
i
––$ %
<
––& '
partidaEncontrada
––( 9
.
––9 :
	Jugadores
––: C
.
––C D
Count
––D I
(
––I J
)
––J K
;
––K L
i
––M N
++
––N P
)
––P Q
{
—— 
try
““ 
{
”” 
partidaEncontrada
‘‘ -
.
‘‘- .
	Jugadores
‘‘. 7
.
‘‘7 8
	ElementAt
‘‘8 A
(
‘‘A B
i
‘‘B C
)
‘‘C D
.
‘‘D E
Conexion
‘‘E M
.
‘‘M N 
GetCallbackChannel
‘‘N `
<
‘‘` a&
IServicioPartidaCallBack
‘‘a y
>
‘‘y z
(
‘‘z {
)
‘‘{ |
.
‘‘| }&
ObtenerListaDeJugadores‘‘} î
(‘‘î ï!
partidaEncontrada‘‘ï ¶
.‘‘¶ ß
	Jugadores‘‘ß ∞
)‘‘∞ ±
;‘‘± ≤
partidaEncontrada
’’ -
.
’’- .
	Jugadores
’’. 7
.
’’7 8
	ElementAt
’’8 A
(
’’A B
i
’’B C
)
’’C D
.
’’D E
Conexion
’’E M
.
’’M N 
GetCallbackChannel
’’N `
<
’’` a&
IServicioPartidaCallBack
’’a y
>
’’y z
(
’’z {
)
’’{ |
.
’’| }(
RespuestaDeUnirseAPartida’’} ñ
(’’ñ ó
$str’’ó ú
)’’ú ù
;’’ù û
}
◊◊ 
catch
ÿÿ 
(
ÿÿ 1
#CommunicationObjectAbortedException
ÿÿ B
)
ÿÿB C
{
ŸŸ 
partidaEncontrada
⁄⁄ -
.
⁄⁄- .
	Jugadores
⁄⁄. 7
.
⁄⁄7 8
	ElementAt
⁄⁄8 A
(
⁄⁄A B
i
⁄⁄B C
)
⁄⁄C D
.
⁄⁄D E
Conexion
⁄⁄E M
.
⁄⁄M N 
GetCallbackChannel
⁄⁄N `
<
⁄⁄` a&
IServicioPartidaCallBack
⁄⁄a y
>
⁄⁄y z
(
⁄⁄z {
)
⁄⁄{ |
.
⁄⁄| }
ExpulsarJugador⁄⁄} å
(⁄⁄å ç!
partidaEncontrada⁄⁄ç û
.⁄⁄û ü
	Jugadores⁄⁄ü ®
.⁄⁄® ©
	ElementAt⁄⁄© ≤
(⁄⁄≤ ≥
i⁄⁄≥ ¥
)⁄⁄¥ µ
.⁄⁄µ ∂
NombreJugador⁄⁄∂ √
)⁄⁄√ ƒ
;⁄⁄ƒ ≈
partidaEncontrada
€€ -
.
€€- .
	Jugadores
€€. 7
.
€€7 8
Remove
€€8 >
(
€€> ?
partidaEncontrada
€€? P
.
€€P Q
	Jugadores
€€Q Z
.
€€Z [
	ElementAt
€€[ d
(
€€d e
i
€€e f
)
€€f g
)
€€g h
;
€€h i
}
‹‹ 
}
›› 
}
ﬁﬁ 
)
ﬁﬁ 
;
ﬁﬁ 
tarea
ﬂﬂ 
.
ﬂﬂ 
Start
ﬂﬂ 
(
ﬂﬂ 
)
ﬂﬂ 
;
ﬂﬂ 
}
‡‡ 
}
‚‚ 	
}
„„ 
}‰‰ 